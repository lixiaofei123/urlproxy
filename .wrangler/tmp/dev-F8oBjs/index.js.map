{
  "version": 3,
  "sources": ["../bundle-FIagut/checked-fetch.js", "wrangler-modules-watch:wrangler:modules-watch", "../../../node_modules/wrangler/templates/modules-watch-stub.js", "../../../node_modules/cookie/index.js", "../bundle-FIagut/middleware-loader.entry.ts", "../bundle-FIagut/middleware-insertion-facade.js", "../../../src/index.ts", "../../../node_modules/@tsndr/cloudflare-worker-jwt/index.js", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../../../node_modules/wrangler/templates/middleware/common.ts"],
  "sourceRoot": "/workspaces/urlproxy/.wrangler/tmp/dev-F8oBjs",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t  );\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "", "// `esbuild` doesn't support returning `watch*` options from `onStart()`\n// plugin callbacks. Instead, we define an empty virtual module that is\n// imported by this injected file. Importing the module registers watchers.\nimport \"wrangler:modules-watch\";\n", "/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n\n/**\n * Module variables.\n * @private\n */\n\nvar __toString = Object.prototype.toString\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {}\n  var opt = options || {};\n  var dec = opt.decode || decode;\n\n  var index = 0\n  while (index < str.length) {\n    var eqIdx = str.indexOf('=', index)\n\n    // no more cookie pairs\n    if (eqIdx === -1) {\n      break\n    }\n\n    var endIdx = str.indexOf(';', index)\n\n    if (endIdx === -1) {\n      endIdx = str.length\n    } else if (endIdx < eqIdx) {\n      // backtrack on prior semicolon\n      index = str.lastIndexOf(';', eqIdx - 1) + 1\n      continue\n    }\n\n    var key = str.slice(index, eqIdx).trim()\n\n    // only assign once\n    if (undefined === obj[key]) {\n      var val = str.slice(eqIdx + 1, endIdx).trim()\n\n      // quoted values\n      if (val.charCodeAt(0) === 0x22) {\n        val = val.slice(1, -1)\n      }\n\n      obj[key] = tryDecode(val, dec);\n    }\n\n    index = endIdx + 1\n  }\n\n  return obj;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid')\n    }\n\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    var expires = opt.expires\n\n    if (!isDate(expires) || isNaN(expires.valueOf())) {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + expires.toUTCString()\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.priority) {\n    var priority = typeof opt.priority === 'string'\n      ? opt.priority.toLowerCase()\n      : opt.priority\n\n    switch (priority) {\n      case 'low':\n        str += '; Priority=Low'\n        break\n      case 'medium':\n        str += '; Priority=Medium'\n        break\n      case 'high':\n        str += '; Priority=High'\n        break\n      default:\n        throw new TypeError('option priority is invalid')\n    }\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string'\n      ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n\n/**\n * URL-decode string value. Optimized to skip native call when no %.\n *\n * @param {string} str\n * @returns {string}\n */\n\nfunction decode (str) {\n  return str.indexOf('%') !== -1\n    ? decodeURIComponent(str)\n    : str\n}\n\n/**\n * URL-encode value.\n *\n * @param {string} str\n * @returns {string}\n */\n\nfunction encode (val) {\n  return encodeURIComponent(val)\n}\n\n/**\n * Determine if value is a Date.\n *\n * @param {*} val\n * @private\n */\n\nfunction isDate (val) {\n  return __toString.call(val) === '[object Date]' ||\n    val instanceof Date\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY from \"/workspaces/urlproxy/.wrangler/tmp/bundle-FIagut/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/workspaces/urlproxy/node_modules/wrangler/templates/middleware/common.ts\";\nimport type {\n\tWithMiddleware,\n\tWorkerEntrypointConstructor,\n} from \"/workspaces/urlproxy/.wrangler/tmp/bundle-FIagut/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/workspaces/urlproxy/.wrangler/tmp/bundle-FIagut/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(\n\tworker: WithMiddleware<ExportedHandler>\n): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (worker.middleware === undefined || worker.middleware.length === 0) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of worker.middleware) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WithMiddleware<WorkerEntrypointConstructor>\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (klass.middleware === undefined || klass.middleware.length === 0) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of klass.middleware) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/workspaces/urlproxy/src/index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/workspaces/urlproxy/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/workspaces/urlproxy/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\t\t\t\t\n\t\t\t\tworker.middleware = [\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default,\n\t\t\t\t\t...(worker.middleware ?? []),\n\t\t\t\t].filter(Boolean);\n\t\t\t\t\n\t\t\t\texport * from \"/workspaces/urlproxy/src/index.ts\";\n\t\t\t\texport default worker;", "/**\n * Welcome to Cloudflare Workers! This is your first worker.\n *\n * - Run `npm run dev` in your terminal to start a development server\n * - Open a browser tab at http://localhost:8787/ to see your worker in action\n * - Run `npm run deploy` to publish your worker\n *\n * Bind resources to your worker in `wrangler.toml`. After adding bindings, a type definition for the\n * `Env` object can be regenerated with `npm run cf-typegen`.\n *\n * Learn more at https://developers.cloudflare.com/workers/\n */\n\n\nimport index from \"./index.html\";\nimport { parse } from \"cookie\";\nconst SIGN_KEY = \"XXXXXXyyyy\";\nimport jwt from '@tsndr/cloudflare-worker-jwt'\nimport { Buffer } from \"node:buffer\";\n\nexport interface Env {\n\tFORCE_DOWNLOAD: string;\n\tPASSWORD: string;\n\tALLOWED_DOMAINS: string;\n}\n\nfunction checkDomain(allowDomains: string, domain: string) {\n\tallowDomains = allowDomains || \"\"\n\tif (allowDomains !== \"\") {\n\t\treturn allowDomains.split(\",\").some(rule => {\n\t\t\tconst regexString = '^' + rule.replace(/\\./g, '\\\\.').replace(/\\*/g, '.*') + '$';\n\t\t\treturn new RegExp(regexString).test(domain)\n\t\t})\n\t} else {\n\t\treturn true\n\t}\n}\n\nasync function checkAuth(req: Request, password: string) {\n\tconst cookie = parse(req.headers.get(\"Cookie\") || \"\");\n\tconst authentication = cookie[\"Authentication\"] || req.headers.get(\"authorization\") || \"\"\n\tif (authentication !== \"\") {\n\t\tif (authentication.indexOf(\"Basic\") === 0) {\n\t\t\tconst encodedstr = authentication.substring(6)\n\t\t\tconst decodedstr = Buffer.from(encodedstr, 'base64').toString('ascii');\n\t\t\tconst userpass = decodedstr.split(\":\")\n\t\t\treturn (userpass.length === 2 && userpass[1] === password)\n\t\t} else if (authentication.indexOf(\"Bearer\") === 0) {\n\t\t\tlet jwttoken = authentication.substring(7)\n\t\t\treturn await jwt.verify(jwttoken, SIGN_KEY)\n\t\t}\n\t}\n\treturn false\n}\n\nasync function proxyRequest(proxyurl: string, req: Request, forceDownload: boolean) {\n\n\tlet host = (new URL(proxyurl)).host\n\n\tlet header = new Headers(req.headers)\n\theader.set(\"Host\", host)\n\theader.delete(\"accept-encoding\")\n\n\ttry {\n\t\tconst proxyResp = await fetch(proxyurl, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: header,\n\t\t\tredirect: \"manual\"\n\t\t})\n\n\t\tlet respHeaders = new Headers(proxyResp.headers)\n\t\tif (respHeaders.has(\"location\")) {\n\t\t\treturn proxyRequest(respHeaders.get(\"location\") || \"\", req, forceDownload)\n\t\t}\n\t\trespHeaders.delete(\"content-security-policy\");\n\t\trespHeaders.delete(\"content-security-policy-report-only\");\n\t\trespHeaders.delete(\"clear-site-data\");\n\t\trespHeaders.delete(\"content-encoding\")\n\t\trespHeaders.set(\"access-control-expose-headers\", \"*\");\n\t\trespHeaders.set(\"access-control-allow-origin\", \"*\");\n\n\t\tif (!respHeaders.has(\"content-disposition\")) {\n\t\t\tif (forceDownload) {\n\t\t\t\trespHeaders.set(\"content-disposition\", \"attachment\");\n\t\t\t}\n\t\t}\n\n\t\treturn new Response(proxyResp.body as any, {\n\t\t\tstatus: proxyResp.status,\n\t\t\theaders: respHeaders\n\t\t})\n\t} catch (e: any) {\n\t\treturn new Response(e.message, { status: 500 });\n\t}\n\n\n}\n\n\nexport default {\n\tasync fetch(request: Request, env: Env, ctx: ExecutionContext): Promise<Response> {\n\n\t\tconst url = new URL(request.url)\n\t\tif (url.pathname.indexOf(\"/proxy/\") === 0) {\n\t\t\tconst PASSWORD = (env.PASSWORD || \"\") + \"\"\n\t\t\tif (PASSWORD === \"\" || await checkAuth(request, PASSWORD)) {\n\t\t\t\tconst ALLOWED_DOMAINS = env.ALLOWED_DOMAINS || \"\"\n\t\t\t\tconst proxyurl = request.url.substring(request.url.indexOf(\"/proxy/\") + 7)\n\n\t\t\t\tif (checkDomain(ALLOWED_DOMAINS, new URL(proxyurl).host)) {\n\t\t\t\t\tconst forceDownload = (env.FORCE_DOWNLOAD || \"\").toLocaleLowerCase() !== \"false\"\n\t\t\t\t\tconst resp = proxyRequest(proxyurl, request, forceDownload)\n\t\t\t\t\treturn resp;\n\t\t\t\t} else {\n\t\t\t\t\treturn new Response(\"Domain is not allowed\", { status: 400 })\n\t\t\t\t}\n\n\n\t\t\t} else {\n\t\t\t\treturn new Response(\"Authorization failed\", { status: 401 })\n\t\t\t}\n\n\t\t}\n\n\t\tif (url.pathname === \"\" || url.pathname === \"/\") {\n\t\t\treturn new Response(index, {\n\t\t\t\theaders: {\n\t\t\t\t\t\"content-type\": \"text/html\",\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (url.pathname === \"/auth/login\") {\n\t\t\tconst PASSWORD = (env.PASSWORD || \"\") + \"\"\n\t\t\tif (PASSWORD !== \"\") {\n\t\t\t\tconst bodyjson: any = await request.json()\n\t\t\t\tconst pwd: string = bodyjson[\"password\"]\n\t\t\t\tif (pwd === PASSWORD) {\n\t\t\t\t\tconst authentication = await jwt.sign({ exp: Math.floor(Date.now() / 1000 + 60 * 60 * 24 * 30) }, SIGN_KEY)\n\t\t\t\t\treturn Response.json({\n\t\t\t\t\t\tauthentication: authentication\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\treturn new Response(\"\u5BC6\u7801\u9519\u8BEF\", { status: 401 })\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn Response.json({})\n\t\t\t}\n\t\t}\n\n\t\tif (url.pathname === \"/auth/check\") {\n\t\t\tconst PASSWORD = (env.PASSWORD || \"\") + \"\"\n\t\t\tif (PASSWORD === \"\" || await checkAuth(request, PASSWORD)) {\n\t\t\t\treturn new Response(\"\", { status: 200 })\n\t\t\t} else {\n\t\t\t\treturn new Response(\"Authorization failed\", { status: 401 })\n\t\t\t}\n\t\t}\n\n\t\treturn new Response('Not Found', {\n\t\t\tstatus: 404\n\t\t});\n\t},\n} satisfies ExportedHandler<Env>;\n", "// src/utils.ts\nfunction bytesToByteString(bytes) {\n  let byteStr = \"\";\n  for (let i = 0; i < bytes.byteLength; i++) {\n    byteStr += String.fromCharCode(bytes[i]);\n  }\n  return byteStr;\n}\nfunction byteStringToBytes(byteStr) {\n  let bytes = new Uint8Array(byteStr.length);\n  for (let i = 0; i < byteStr.length; i++) {\n    bytes[i] = byteStr.charCodeAt(i);\n  }\n  return bytes;\n}\nfunction arrayBufferToBase64String(arrayBuffer) {\n  return btoa(bytesToByteString(new Uint8Array(arrayBuffer)));\n}\nfunction base64StringToArrayBuffer(b64str) {\n  return byteStringToBytes(atob(b64str)).buffer;\n}\nfunction textToArrayBuffer(str) {\n  return byteStringToBytes(str);\n}\nfunction arrayBufferToBase64Url(arrayBuffer) {\n  return arrayBufferToBase64String(arrayBuffer).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n}\nfunction base64UrlToArrayBuffer(b64url) {\n  return base64StringToArrayBuffer(b64url.replace(/-/g, \"+\").replace(/_/g, \"/\").replace(/\\s/g, \"\"));\n}\nfunction textToBase64Url(str) {\n  const encoder = new TextEncoder();\n  const charCodes = encoder.encode(str);\n  const binaryStr = String.fromCharCode(...charCodes);\n  return btoa(binaryStr).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n}\nfunction pemToBinary(pem) {\n  return base64StringToArrayBuffer(pem.replace(/-+(BEGIN|END).*/g, \"\").replace(/\\s/g, \"\"));\n}\nasync function importTextSecret(key, algorithm, keyUsages) {\n  return await crypto.subtle.importKey(\"raw\", textToArrayBuffer(key), algorithm, true, keyUsages);\n}\nasync function importJwk(key, algorithm, keyUsages) {\n  return await crypto.subtle.importKey(\"jwk\", key, algorithm, true, keyUsages);\n}\nasync function importPublicKey(key, algorithm, keyUsages) {\n  return await crypto.subtle.importKey(\"spki\", pemToBinary(key), algorithm, true, keyUsages);\n}\nasync function importPrivateKey(key, algorithm, keyUsages) {\n  return await crypto.subtle.importKey(\"pkcs8\", pemToBinary(key), algorithm, true, keyUsages);\n}\nasync function importKey(key, algorithm, keyUsages) {\n  if (typeof key === \"object\")\n    return importJwk(key, algorithm, keyUsages);\n  if (typeof key !== \"string\")\n    throw new Error(\"Unsupported key type!\");\n  if (key.includes(\"PUBLIC\"))\n    return importPublicKey(key, algorithm, keyUsages);\n  if (key.includes(\"PRIVATE\"))\n    return importPrivateKey(key, algorithm, keyUsages);\n  return importTextSecret(key, algorithm, keyUsages);\n}\nfunction decodePayload(raw) {\n  try {\n    const bytes = Array.from(atob(raw), (char) => char.charCodeAt(0));\n    const decodedString = new TextDecoder(\"utf-8\").decode(new Uint8Array(bytes));\n    return JSON.parse(decodedString);\n  } catch {\n    return;\n  }\n}\n\n// src/index.ts\nif (typeof crypto === \"undefined\" || !crypto.subtle)\n  throw new Error(\"SubtleCrypto not supported!\");\nvar algorithms = {\n  ES256: { name: \"ECDSA\", namedCurve: \"P-256\", hash: { name: \"SHA-256\" } },\n  ES384: { name: \"ECDSA\", namedCurve: \"P-384\", hash: { name: \"SHA-384\" } },\n  ES512: { name: \"ECDSA\", namedCurve: \"P-521\", hash: { name: \"SHA-512\" } },\n  HS256: { name: \"HMAC\", hash: { name: \"SHA-256\" } },\n  HS384: { name: \"HMAC\", hash: { name: \"SHA-384\" } },\n  HS512: { name: \"HMAC\", hash: { name: \"SHA-512\" } },\n  RS256: { name: \"RSASSA-PKCS1-v1_5\", hash: { name: \"SHA-256\" } },\n  RS384: { name: \"RSASSA-PKCS1-v1_5\", hash: { name: \"SHA-384\" } },\n  RS512: { name: \"RSASSA-PKCS1-v1_5\", hash: { name: \"SHA-512\" } }\n};\nasync function sign(payload, secret, options = \"HS256\") {\n  if (typeof options === \"string\")\n    options = { algorithm: options };\n  options = { algorithm: \"HS256\", header: { typ: \"JWT\" }, ...options };\n  if (!payload || typeof payload !== \"object\")\n    throw new Error(\"payload must be an object\");\n  if (!secret || typeof secret !== \"string\" && typeof secret !== \"object\")\n    throw new Error(\"secret must be a string, a JWK object or a CryptoKey object\");\n  if (typeof options.algorithm !== \"string\")\n    throw new Error(\"options.algorithm must be a string\");\n  const algorithm = algorithms[options.algorithm];\n  if (!algorithm)\n    throw new Error(\"algorithm not found\");\n  if (!payload.iat)\n    payload.iat = Math.floor(Date.now() / 1e3);\n  const partialToken = `${textToBase64Url(JSON.stringify({ ...options.header, alg: options.algorithm }))}.${textToBase64Url(JSON.stringify(payload))}`;\n  const key = secret instanceof CryptoKey ? secret : await importKey(secret, algorithm, [\"sign\"]);\n  const signature = await crypto.subtle.sign(algorithm, key, textToArrayBuffer(partialToken));\n  return `${partialToken}.${arrayBufferToBase64Url(signature)}`;\n}\nasync function verify(token, secret, options = \"HS256\") {\n  if (typeof options === \"string\")\n    options = { algorithm: options };\n  options = { algorithm: \"HS256\", clockTolerance: 0, throwError: false, ...options };\n  if (typeof token !== \"string\")\n    throw new Error(\"token must be a string\");\n  if (typeof secret !== \"string\" && typeof secret !== \"object\")\n    throw new Error(\"secret must be a string, a JWK object or a CryptoKey object\");\n  if (typeof options.algorithm !== \"string\")\n    throw new Error(\"options.algorithm must be a string\");\n  const tokenParts = token.split(\".\");\n  if (tokenParts.length !== 3)\n    throw new Error(\"token must consist of 3 parts\");\n  const algorithm = algorithms[options.algorithm];\n  if (!algorithm)\n    throw new Error(\"algorithm not found\");\n  const { header, payload } = decode(token);\n  if (header?.alg !== options.algorithm) {\n    if (options.throwError)\n      throw new Error(\"ALG_MISMATCH\");\n    return false;\n  }\n  try {\n    if (!payload)\n      throw new Error(\"PARSE_ERROR\");\n    const now = Math.floor(Date.now() / 1e3);\n    if (payload.nbf && payload.nbf > now && payload.nbf - now > (options.clockTolerance ?? 0))\n      throw new Error(\"NOT_YET_VALID\");\n    if (payload.exp && payload.exp <= now && now - payload.exp > (options.clockTolerance ?? 0))\n      throw new Error(\"EXPIRED\");\n    const key = secret instanceof CryptoKey ? secret : await importKey(secret, algorithm, [\"verify\"]);\n    return await crypto.subtle.verify(algorithm, key, base64UrlToArrayBuffer(tokenParts[2]), textToArrayBuffer(`${tokenParts[0]}.${tokenParts[1]}`));\n  } catch (err) {\n    if (options.throwError)\n      throw err;\n    return false;\n  }\n}\nfunction decode(token) {\n  return {\n    header: decodePayload(token.split(\".\")[0].replace(/-/g, \"+\").replace(/_/g, \"/\")),\n    payload: decodePayload(token.split(\".\")[1].replace(/-/g, \"+\").replace(/_/g, \"/\"))\n  };\n}\nvar src_default = {\n  sign,\n  verify,\n  decode\n};\nexport {\n  decode,\n  src_default as default,\n  sign,\n  verify\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n"],
  "mappings": "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",
  "names": ["parse", "decode", "index", "Buffer", "src_default", "src_default"]
}
